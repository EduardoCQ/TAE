<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENARE 2026 - Banco de Quest√µes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            transition: background 0.3s ease;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        /* Bot√µes flutuantes */
        .floating-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .floating-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
            background: white;
        }

        body.dark-mode .floating-btn {
            background: #2d2d44;
        }

        .floating-btn:hover {
            transform: scale(1.1);
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        body.dark-mode .card {
            background: #2d2d44;
            color: #e0e0e0;
        }

        /* Header */
        .header {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        body.dark-mode .header {
            background: #2d2d44;
        }

        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        body.dark-mode .header p {
            color: #aaa;
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        body.dark-mode h2 {
            color: #e0e0e0;
        }

        /* Bot√µes principais */
        .btn-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        /* Bot√£o de finalizar (√∫ltima quest√£o) */
        .btn-finish {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-finish:hover {
            background: linear-gradient(135deg, #f5576c 0%, #f093fb 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        /* Slider de quantidade */
        .slider-container {
            margin: 30px 0;
            text-align: center;
        }

        .slider-label {
            font-weight: 600;
            margin-bottom: 15px;
            display: block;
            font-size: 1.1em;
        }

        body.dark-mode .slider-label {
            color: #e0e0e0;
        }

        .slider-value {
            font-size: 3em;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 15px 0;
        }

        .slider {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        body.dark-mode .slider {
            background: #444;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.5);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            border: none;
        }

        /* Grid de quest√µes */
        .questions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .question-btn {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1.1em;
        }

        body.dark-mode .question-btn {
            background: #1a1a2e;
            border-color: #444;
            color: #e0e0e0;
        }

        .question-btn:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.05);
            border-color: #667eea;
        }

        /* Filtros */
        .filter-section {
            margin: 25px 0;
        }

        .filter-label {
            font-weight: 600;
            margin-bottom: 12px;
            display: block;
            font-size: 1.05em;
        }

        body.dark-mode .filter-label {
            color: #e0e0e0;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-btn {
            padding: 10px 18px;
            border: 2px solid #ddd;
            border-radius: 25px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
            font-weight: 500;
        }

        body.dark-mode .filter-btn {
            background: #1a1a2e;
            border-color: #444;
            color: #e0e0e0;
        }
            
body.dark-mode .filter-btn.active {
    background: linear-gradient(135deg, #9c27b0 0%, #673ab7 100%) !important;
    color: white !important;
    border-color: #9c27b0 !important;
    box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4) !important;
}


        .filter-btn:hover {
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        /* Busca */
        .search-box {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            margin-bottom: 20px;
            transition: border-color 0.3s ease;
        }

        body.dark-mode .search-box {
            background: #1a1a2e;
            border-color: #444;
            color: #e0e0e0;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }

        /* Timer */
        .timer-option {
            margin: 25px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        body.dark-mode .timer-option {
            background: #1a1a2e;
        }

        .timer-option label {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            font-weight: 500;
        }

        body.dark-mode .timer-option label {
            color: #e0e0e0;
        }

        .timer-option input[type="checkbox"] {
            width: 22px;
            height: 22px;
            cursor: pointer;
        }

        .timer-display {
            position: fixed;
            top: 140px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 1.3em;
            font-weight: bold;
            z-index: 999;
            min-width: 100px;
            text-align: center;
        }

        body.dark-mode .timer-display {
            background: #2d2d44;
            color: #e0e0e0;
        }

        /* Quest√µes */
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .question-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1.1em;
        }

        .question-area {
            background: #28a745;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1em;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        body.dark-mode .progress-bar {
            background: #1a1a2e;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
        }

        .question-text {
            font-size: 1.15em;
            line-height: 1.8;
            margin: 25px 0;
            color: #333;
        }

        body.dark-mode .question-text {
            color: #e0e0e0;
        }

        /* Op√ß√µes */
        .option-btn {
            width: 100%;
            padding: 18px;
            margin: 12px 0;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.05em;
            color: #333;
        }

        body.dark-mode .option-btn {
            background: #1a1a2e;
            border-color: #444;
            color: #e0e0e0;
        }

        .option-btn:hover:not(.correct):not(.incorrect) {
            border-color: #667eea;
            transform: translateX(5px);
            background: #f8f9ff;
        }

        body.dark-mode .option-btn:hover:not(.correct):not(.incorrect) {
            background: #252541;
            border-color: #667eea;
        }

        .option-btn.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white !important;
            border-color: #667eea;
        }

        .option-btn.correct {
            background: #28a745 !important;
            color: white !important;
            border-color: #28a745 !important;
            animation: correctPulse 0.6s ease;
        }

        .option-btn.incorrect {
            background: #dc3545 !important;
            color: white !important;
            border-color: #dc3545 !important;
            animation: incorrectShake 0.5s ease;
        }

        .option-btn.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        /* Explica√ß√£o */
        .explanation-container {
            margin-top: 30px;
            animation: slideDown 0.4s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .explanation-card {
            background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.2);
        }

        body.dark-mode .explanation-card {
            background: linear-gradient(135deg, #3d3d00 0%, #4d4d00 100%);
            border-color: #ffc107;
        }

        .explanation-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: 700;
            color: #856404;
        }

        body.dark-mode .explanation-header {
            color: #ffeb3b;
        }

        .explanation-icon {
            font-size: 1.5em;
        }

        .explanation-content {
            color: #856404;
            line-height: 1.8;
            font-size: 1.05em;
        }

        body.dark-mode .explanation-content {
            color: #ffeb3b;
        }

        .explanation-content strong {
            display: block;
            margin-bottom: 12px;
            font-size: 1.15em;
            color: #664d03;
        }

        body.dark-mode .explanation-content strong {
            color: #ffd700;
        }

        /* Estat√≠sticas */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 2.8em;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.95;
        }

        /* Utilit√°rios */
        .hidden {
            display: none;
        }

        /* Responsivo */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .btn-group {
                grid-template-columns: 1fr;
            }

            .questions-grid {
                grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            }

            .floating-buttons {
                flex-direction: row;
                gap: 8px;
            }

            .floating-btn {
                width: 45px;
                height: 45px;
                font-size: 1.3em;
            }

            .timer-display {
                top: 20px;
                right: auto;
                left: 20px;
                font-size: 1.1em;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Bot√µes flutuantes -->
    <div class="floating-buttons">
        <button class="floating-btn" id="themeBtn" onclick="toggleTheme()" title="Alternar tema">üåô</button>
        <button class="floating-btn hidden" id="homeBtn" onclick="voltarInicio()" title="Voltar ao in√≠cio">üè†</button>
    </div>

    <!-- Timer -->
    <div class="timer-display hidden" id="timerDisplay">
        <div style="font-size: 0.8em; opacity: 0.8;">‚è±Ô∏è</div>
        <div id="timerValue">00:00</div>
    </div>

    <div class="container">
        <!-- TELA INICIAL -->
        <div id="homeScreen">
            <div class="header">
                <h1>üéØ T√¥ aprovado ENARE! üè•</h1>
                <p style="font-size: 0.95em; margin-top: -10px; margin-bottom: 10px; opacity: 0.9; font-style: italic;">Por Eduardo Chaves Queiroz</p>
                <p>Prepare-se para o Exame Nacional de Resid√™ncia com 50 quest√µes oficiais</p>
            </div>

            <div class="card">
                <h2>üìö Escolha o modo de estudo</h2>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showRandomConfig()">
                        üé≤ Praticar Aleatoriamente
                    </button>
                    <button class="btn btn-primary" onclick="showSpecificConfig()">
                        üéØ Selecionar Quest√£o
                    </button>
                </div>
            </div>

            <div class="card">
                <h2>üìä Estat√≠sticas do Banco</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">50</div>
                        <div class="stat-label">Quest√µes Dispon√≠veis</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">5</div>
                        <div class="stat-label">√Åreas M√©dicas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">100%</div>
                        <div class="stat-label">Comentadas</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONFIGURA√á√ÉO ALEAT√ìRIA -->
        <div id="randomConfig" class="hidden">
            <div class="card">
                <h2>üé≤ Configurar Pr√°tica Aleat√≥ria</h2>

                <div class="slider-container">
                    <label class="slider-label">Quantas quest√µes voc√™ deseja fazer?</label>
                    <div class="slider-value" id="sliderValue">10</div>
                    <input type="range" class="slider" id="numQuestions" min="1" max="50" value="10" oninput="updateSliderValue(this.value)">
                    <div style="margin-top: 10px; opacity: 0.7; font-size: 0.9em;">Dispon√≠vel: 50 quest√µes</div>
                </div>

                <div class="filter-section">
                    <label class="filter-label">Filtrar por √°rea (opcional):</label>
                    <div class="filter-buttons" id="areaFilters">
                        <button class="filter-btn active" onclick="selectFilter(this, 'all')">Todas</button>
                        <button class="filter-btn" onclick="selectFilter(this, 'Cl√≠nica M√©dica')">Cl√≠nica M√©dica</button>
                        <button class="filter-btn" onclick="selectFilter(this, 'Cirurgia')">Cirurgia</button>
                        <button class="filter-btn" onclick="selectFilter(this, 'Pediatria')">Pediatria</button>
                        <button class="filter-btn" onclick="selectFilter(this, 'Ginecologia e Obstetr√≠cia')">Ginecologia e Obstetr√≠cia</button>
                        <button class="filter-btn" onclick="selectFilter(this, 'Preventiva')">Preventiva</button>
                    </div>
                </div>

                <div class="timer-option">
                    <label>
                        <input type="checkbox" id="enableTimer">
                        <span>‚è±Ô∏è Ativar cron√¥metro (2 minutos por quest√£o)</span>
                    </label>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="startRandom()">üöÄ Iniciar Pr√°tica</button>
                    <button class="btn btn-secondary" onclick="voltarInicio()">‚Üê Voltar</button>
                </div>
            </div>
        </div>

        <!-- SELE√á√ÉO ESPEC√çFICA -->
        <div id="specificConfig" class="hidden">
            <div class="card">
                <h2>üéØ Selecionar Quest√£o Espec√≠fica</h2>

                <input type="text" class="search-box" id="searchBox" placeholder="üîç Buscar por palavra-chave na quest√£o..." oninput="filterQuestions()">

                <div class="filter-section">
                    <label class="filter-label">Filtrar por √°rea:</label>
                    <div class="filter-buttons">
                        <button class="filter-btn active" onclick="filterByArea(this, 'all')">Todas</button>
                        <button class="filter-btn" onclick="filterByArea(this, 'Cl√≠nica M√©dica')">Cl√≠nica M√©dica</button>
                        <button class="filter-btn" onclick="filterByArea(this, 'Cirurgia')">Cirurgia</button>
                        <button class="filter-btn" onclick="filterByArea(this, 'Pediatria')">Pediatria</button>
                        <button class="filter-btn" onclick="filterByArea(this, 'Ginecologia e Obstetr√≠cia')">Ginecologia e Obstetr√≠cia</button>
                        <button class="filter-btn" onclick="filterByArea(this, 'Preventiva')">Preventiva</button>
                    </div>
                </div>

                <label class="filter-label" style="margin-top: 25px;">Clique no n√∫mero da quest√£o que deseja responder:</label>
                <div class="questions-grid" id="questionsGrid"></div>

                <div class="btn-group" style="margin-top: 25px;">
                    <button class="btn btn-secondary" onclick="voltarInicio()">‚Üê Voltar</button>
                </div>
            </div>
        </div>

        <!-- √ÅREA DE QUEST√ïES -->
        <div id="questionArea" class="hidden">
            <div class="card">
                <div class="question-header">
                    <span class="question-number" id="questionNum"></span>
                    <span class="question-area" id="questionCategory"></span>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progress"></div>
                </div>

                <div class="question-text" id="questionText"></div>

                <div id="optionsContainer"></div>

                <div id="explanationContainer" class="hidden"></div>

                <div class="btn-group hidden" style="margin-top: 25px;" id="nextBtnContainer">
                    <button class="btn btn-success" id="nextBtn" onclick="nextQuestion()">
                        <span id="nextBtnText">Pr√≥xima Quest√£o ‚Üí</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- FINALIZA√á√ÉO MODO ESPEC√çFICO -->
        <div id="specificFinish" class="hidden">
            <div class="card">
                <h2 style="text-align: center; color: #28a745;">‚úÖ Quest√£o Conclu√≠da!</h2>
                <p style="text-align: center; margin: 25px 0; font-size: 1.15em; color: #666;">O que deseja fazer agora?</p>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="showSpecificConfig()">
                        üéØ Resolver Outra Quest√£o
                    </button>
                    <button class="btn btn-secondary" onclick="voltarInicio()">
                        üè† Voltar ao In√≠cio
                    </button>
                </div>
            </div>
        </div>

        <!-- ESTAT√çSTICAS FINAIS -->
        <div id="statsScreen" class="hidden">
            <div class="card">
                <h2 style="text-align: center;">üìä Resultado Final</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalQuestions">0</div>
                        <div class="stat-label">Total de Quest√µes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">Acertos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Erros</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="finalPercentage">0%</div>
                        <div class="stat-label">Aproveitamento</div>
                    </div>
                </div>

                <div class="btn-group" style="margin-top: 30px;">
                    <button class="btn btn-primary" onclick="showRandomConfig()">üîÑ Nova Pr√°tica</button>
                    <button class="btn btn-secondary" onclick="voltarInicio()">üè† P√°gina Inicial</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Banco de 50 quest√µes ENARE 2026
        const questions = [
            {id:1,area:"Cl√≠nica M√©dica",question:"Homem de 34 anos, febre (38,5¬∞C), dores moderadas, manchas h√° 3d. Hoje: dor abdominal e v√¥mitos incontrol√°veis. Prostrado, mucosas coradas, extremidades bem perfundidas. PA 120x80, FR 16, FC 80. Leve dor palpa√ß√£o abdominal. Hip√≥tese diagn√≥stica e manejo:",options:["Dengue grupo B. Hidrata√ß√£o oral, analg√©sico, antiem√©tico; hemograma, plaquetas, NS1; acompanhamento domiciliar.","Dengue grupo C. Hidrata√ß√£o oral, analg√©sico, antiem√©tico; hemograma, plaquetas, IgM; acompanhamento ambulatorial.","Dengue grupo C. Hidrata√ß√£o parenteral, analg√©sico, antiem√©tico; hemograma, plaquetas, NS1; leito observa√ß√£o.","Dengue grupo B. Hidrata√ß√£o parenteral, analg√©sico, antiem√©tico; hemograma, plaquetas, NS1, IgM; leito observa√ß√£o."],correct:2,explanation:"Dengue grupo C (sinais de alarme): v√¥mitos incontrol√°veis, dor abdominal. Requer hidrata√ß√£o venosa e observa√ß√£o hospitalar. NS1 positivo nos primeiros dias. N√£o h√° hipotens√£o ou choque (grupo D)."},
            {id:2,area:"Cirurgia",question:"Mulher de 27 anos: dor abdominal epig√°strica h√° 2d, cont√≠nua, evoluiu para FID h√° 1d. N√°useas, perda apetite, febre 38,2¬∞C. √öltima menstrua√ß√£o h√° 23d (ciclos 28d). Descompress√£o brusca dolorosa QID. Conduta:",options:["Antibi√≥tico emp√≠rico at√© urocultura.","TC abdome e iniciar metotrexato.","Antibi√≥tico emp√≠rico e acompanhamento ambulatorial.","USG abdome e parecer cir√∫rgico."],correct:3,explanation:"Apendicite aguda: dor epig√°strica migrando para FID, febre, n√°useas, descompress√£o brusca positiva (Blumberg). Mulher em idade f√©rtil: excluir gravidez ect√≥pica. USG para diagn√≥stico diferencial, parecer cir√∫rgico para indica√ß√£o operat√≥ria urgente."},
            {id:3,area:"Cl√≠nica M√©dica",question:"Mulher trans de 28 anos, profissional do sexo. Rela√ß√µes desprotegidas, principalmente anais receptivas. H√° 2 dias: rela√ß√£o desprotegida. Nunca usou PrEP/PEP. Assintom√°tica. Melhor estrat√©gia:",options:["PrEP ap√≥s HIV n√£o reagente, PEP ap√≥s tratamento, rastreamento ISTs 3/3m.","Teste r√°pido HIV/s√≠filis, PrEP in√≠cio imediato, vacinas SUS.","Teste r√°pido HIV/s√≠filis, PEP se HIV n√£o reagente, iniciar PrEP ap√≥s t√©rmino PEP.","PEP e PrEP concomitantes, sorologias ISTs, retorno."],correct:2,explanation:"Exposi√ß√£o h√° 2 dias: indica√ß√£o PEP (at√© 72h). Fazer teste r√°pido HIV, se negativo iniciar PEP 28 dias. Alto risco cont√≠nuo: ap√≥s t√©rmino PEP, iniciar PrEP. N√£o se inicia PrEP durante PEP."},
            {id:4,area:"Preventiva",question:"Homem de 52 anos, tabagista 2 ma√ßos/dia h√° 21 anos, sem acompanhamento desde 35 anos. Hist√≥ria familiar: DM, HAS, m√£e com CA pulm√£o. PA 120x80, IMC 23. Rastreamento adequado:",options:["CT fra√ß√µes, hemograma, glicemia, Cr, PSA, RX t√≥rax, colonoscopia, toque retal; orientar atividade f√≠sica.","CT, glicemia, sangue oculto fezes, PSA, anti-HIV, HBsAg, toque retal; grupo cessa√ß√£o tabagismo.","abordar estilo de vida e cessa√ß√£o; acompanhar em consultas, exames quando atingir faixa et√°ria.","CT, HDL, TG, glicemia, sangue oculto fezes, testes r√°pidos HIV/s√≠filis/hepatites; cessa√ß√£o tabagismo."],correct:3,explanation:"Rastreamentos indicados: DM (glicemia), dislipidemia (perfil lip√≠dico), CA colorretal (sangue oculto - idade 50-75), ISTs (oferecer testes). Foco na cessa√ß√£o do tabagismo (principal risco)."},
            {id:5,area:"Cl√≠nica M√©dica",question:"Homem de 28 anos com les√£o cut√¢nea dorsal da m√£o 1 m√™s ap√≥s arranhadura de gato. √ölceras com crostas e nodula√ß√µes pr√≥ximas. Bi√≥psia: dermatite granulomatosa, corpos asteroides. Diagn√≥stico e tratamento:",options:["Furunculose; cefalexina 7 dias.","Herpes-zoster; aciclovir 10 dias.","Esporotricose; itraconazol 120 dias.","Paracoccidioidomicose; anfotericina B 30 dias."],correct:2,explanation:"Esporotricose: micose subcut√¢nea por Sporothrix. Trauma inocula fungo (plantas, solo, unhas de animais). Forma linfocut√¢nea t√≠pica: les√£o + nodula√ß√µes no trajeto linf√°tico. Corpos asteroides s√£o caracter√≠sticos. Tratamento: itraconazol 3-6 meses."},
            {id:6,area:"Cl√≠nica M√©dica",question:"Homem de 35 anos, dor articular sacroil√≠aca e coluna, pior √† noite/repouso, melhora com movimento. Rigidez matinal >1h. Dor calc√¢neos. HLA-B27 positivo. RX: sacroili√≠te bilateral. Diagn√≥stico:",options:["Artrite reativa.","Artrite psori√°tica.","Espondilite anquilosante.","LES."],correct:2,explanation:"Espondilite anquilosante: espondiloartrite soronegativa. Dor inflamat√≥ria coluna/sacroil√≠aca (melhora movimento, piora repouso), rigidez matinal >30min, entesite. HLA-B27+ em 90%. RX: sacroili√≠te. Tratamento: AINE, fisioterapia."},
            {id:7,area:"Cl√≠nica M√©dica",question:"Homem de 48 anos, auxiliar pedreiro, dor lombar h√° 3 sem, insidiosa, sem irradia√ß√£o. Piora fim do dia, melhora repouso/paracetamol. Nega perda peso, febre, trauma, incontin√™ncia, fraqueza MMII. Dor palpa√ß√£o paravertebral lombar, sem altera√ß√µes neurol√≥gicas. Pr√≥ximo passo:",options:["RNM coluna lombar e encaminhar ortopedia.","RX lombar, corticoide oral, retorno 10d.","Repouso, atestado 7d, antidepressivo tric√≠clico.","Explicar natureza benigna, analgesia, atividade f√≠sica leve, reavaliar 4-6 sem."],correct:3,explanation:"Lombalgia inespec√≠fica/mec√¢nica: sem red flags (perda peso, febre, trauma significativo, d√©ficit neurol√≥gico, incontin√™ncia). Conduta conservadora: orienta√ß√£o, analgesia, manter atividade. Exames de imagem n√£o mudam conduta inicialmente."},
            {id:8,area:"Cirurgia",question:"Mulher de 78 anos, dor e abaulamento inguinal direito h√° 24h. V√¥mitos, diminui√ß√£o de flatos. IMC 35. Abaulamento n√£o redut√≠vel, desconforto, discreta hiperemia. Hip√≥tese:",options:["isquemia mesent√©rica.","h√©rnia inguinal indireta.","h√©rnia femoral encarcerada.","neoplasia de c√≥lon obstrutiva."],correct:2,explanation:"H√©rnia femoral encarcerada: mais comum em mulheres idosas. Abaulamento inguinal (abaixo ligamento inguinal, medial), n√£o redut√≠vel, obstru√ß√£o intestinal. Hiperemia=complica√ß√£o. Maior risco de estrangulamento que inguinal."},
            {id:9,area:"Cirurgia",question:"Menino de 6 anos, queixa fimose. M√£e relata balanopostites frequentes, 1¬∫ epis√≥dio 1a. Nega ITU. EF: prep√∫cio cobrindo glande, quando tracionado exp√µe meato e anel fibr√≥tico. Conduta:",options:["Fimose fisiol√≥gica, exerc√≠cios redu√ß√£o e higiene.","Indica√ß√£o cir√∫rgica adolesc√™ncia, pois exp√µe meato.","Indica√ß√£o cir√∫rgica: balanopostites recorrentes com fibrose.","Betametasona + hialuronidase 4 sem, pois exp√µe meato."],correct:2,explanation:"Fimose patol√≥gica com indica√ß√£o cir√∫rgica: balanopostites recorrentes (complica√ß√£o) + anel fibr√≥tico (n√£o permite retra√ß√£o completa). Fimose fisiol√≥gica resolve at√© 3-5 anos."},
            {id:10,area:"Cirurgia",question:"Homem de 20 anos, trauma autom√≥vel-muro sem cinto. Torporoso, SatO2 60%, FR 28, FC 112, PA 90x50. Desvio traqueia √† direita, turg√™ncia jugular, hipofonese bulhas, MV diminu√≠do √† esquerda. Conduta pr√©-hospitalar:",options:["Reposi√ß√£o vol√™mica.","Cricotireoidostomia.","Pericardiocentese.","Toracocentese."],correct:3,explanation:"Pneumot√≥rax hipertensivo √† esquerda: desvio traqueia contralateral, turg√™ncia jugular, hipofonese, hipoxemia, hipotens√£o. Emerg√™ncia com risco de vida imediato. Tratamento: toracocentese (descompress√£o por agulha no 2¬∫ EIC linha hemiclavicular)."},
            {id:11,area:"Ginecologia e Obstetr√≠cia",question:"G5P3C1, 35 anos, IG 15 sem (USG 8 sem), HAS cr√¥nica em enalapril, antecedente pr√©-ecl√¢mpsia. PA 140x90. Conduta medicamentosa:",options:["Captopril, varfarina, AAS.","Furosemida, varfarina, c√°lcio.","Losartana, enoxaparina, c√°lcio.","Alfa-metildopa, AAS, c√°lcio."],correct:3,explanation:"Gestante hipertensa: trocar IECA (enalapril/captopril - teratog√™nicos) e BRA (losartana) por alfa-metildopa. Antecedente pr√©-ecl√¢mpsia: AAS 100-150mg/dia <16 sem previne recorr√™ncia. C√°lcio 1-2g/dia."},
            {id:12,area:"Cl√≠nica M√©dica",question:"Mulher de 65 anos: lentid√£o h√° 6m, dificuldade amarrar sapatos/abotoar. Passos curtos, instabilidade, 1 queda. Tremor repouso, rigidez, altera√ß√£o sono. Nega altera√ß√µes cognitivas. F√°cies m√°scara, marcha pequenos passos, tremor assim√©trico, hipertonia roda dentada. RNM: atrofia compat√≠vel com idade. Tratamento inicial:",options:["levodopa e carbidopa.","donepezila e memantina.","propranolol e amantina.","atorvastatina e baclofeno."],correct:0,explanation:"Doen√ßa de Parkinson: tr√≠ade bradicinesia + rigidez + tremor de repouso. Sinais: f√°cies em m√°scara, marcha festinante, hipertonia em roda dentada, tremor assim√©trico. Tratamento sintom√°tico: levodopa + carbidopa."},
            {id:13,area:"Preventiva",question:"Mulher de 32 anos, trabalhadora rural (plantio morango). Ap√≥s pulveriza√ß√£o agrot√≥xicos: tonturas, cefaleia, cansa√ßo, n√°useas, falta de ar. Colega com queixas similares. Conduta adequada:",options:["Encaminhar ao CEREST estadual e den√∫ncia ao MPT.","Estabelecer nexo causal com exames, confirmar diagn√≥stico, notificar Vigil√¢ncia.","Tratar sintomas, exames, notificar SINAN, atestado, matriciamento Vigil√¢ncia ST.","Informar que CAT √© atribui√ß√£o exclusiva da medicina do trabalho no CEREST."],correct:2,explanation:"Conduta na APS: tratamento imediato, solicitar exames (colinesterase), notifica√ß√£o compuls√≥ria SINAN (intoxica√ß√£o por agrot√≥xico), conceder atestado e solicitar apoio matricial da Vigil√¢ncia em Sa√∫de do Trabalhador."},
            {id:14,area:"Ginecologia e Obstetr√≠cia",question:"Paciente de 30 anos com fadiga, dismenorr√©ia progressiva e dispareunia de profundidade. Toque vaginal: √∫tero retroversofletido, dor √† mobiliza√ß√£o do colo. A principal hip√≥tese diagn√≥stica √©",options:["doen√ßa inflamat√≥ria p√©lvica.","miomatose uterina.","cisto hemorr√°gico.","endometriose."],correct:3,explanation:"Tr√≠ade cl√°ssica de endometriose: dismenorr√©ia progressiva, dispareunia de profundidade e dor √† mobiliza√ß√£o uterina. √ötero retroversofletido pode estar fixo por ader√™ncias endometri√≥ticas. Principal causa de dismenorr√©ia secund√°ria."},
            {id:15,area:"Pediatria",question:"Crian√ßa de 3 anos, febre h√° 4 dias (40¬∞C), irritabilidade, exantema, hiperemia conjuntival, fissuras labiais, l√≠ngua framboesa, adenomegalia cervical, edema m√£os/p√©s. Conduta:",options:["AAS + imunoglobulina endovenosa.","Amoxicilina 10 dias.","Corticoide sist√™mico.","Observa√ß√£o, auto-limitada."],correct:0,explanation:"Doen√ßa de Kawasaki: febre ‚â•5 dias + ‚â•4 crit√©rios (exantema, conjuntivite n√£o-exsudativa, altera√ß√µes l√°bios/l√≠ngua, adenopatia cervical, altera√ß√µes extremidades). Complica√ß√£o: aneurismas coronarianos. Tratamento: AAS + imunoglobulina EV."},
            {id:16,area:"Ginecologia e Obstetr√≠cia",question:"Primigesta 29 anos, 41 sem, risco habitual. Preocupada com dura√ß√£o gravidez. Assintom√°tica, MF presente, EF normal. Perfil biof√≠sico h√° 1d normal. Conduta:",options:["Repouso domiciliar, indu√ß√£o ap√≥s 42 sem.","Dopplervelocimetria obst√©trica, planejar manejo conforme resultado.","Amnioscopia para mec√¥nio, planejar conforme resultado.","Perfil biof√≠sico + CTG a cada 2-3d, indu√ß√£o at√© 41s6d."],correct:3,explanation:"Gesta√ß√£o p√≥s-termo (41 semanas): aumenta riscos (morte fetal, mec√¥nio, macrossomia). Conduta: vigil√¢ncia fetal rigorosa (perfil biof√≠sico + CTG) a cada 2-3 dias. Indu√ß√£o programada entre 41-42 semanas (idealmente at√© 41s6d)."},
            {id:17,area:"Ginecologia e Obstetr√≠cia",question:"Gestante de 25 anos, 2¬∫ trimestre, 1¬™ consulta pr√©-natal. Teste r√°pido s√≠filis positivo. Recebeu penicilina benzatina 2,4M UI. Nega tratamento pr√©vio. Sobre acompanhamento:",options:["com tratamento, feto n√£o ter√° sequelas.","titula√ß√µes ‚â§ 1/4 indicam cicatriz sorol√≥gica.","queda de 2 titula√ß√µes do VDRL indica efetividade.","FTA-Abs reagente indica doen√ßa ativa."],correct:2,explanation:"Efetividade do tratamento: queda de 2 dilui√ß√µes (4x) do VDRL em 6-12 meses. FTA-Abs permanece reagente mesmo ap√≥s cura (mem√≥ria imunol√≥gica). Tratamento adequado reduz risco fetal mas n√£o elimina."},
            {id:18,area:"Cl√≠nica M√©dica",question:"Mult√≠para, 37 sem, obesa, DMG controlada com insulina NPH e regular. Parto normal, RN 3300g. Conduta puerp√©rio imediato:",options:["suspender insulinoterapia.","iniciar hipoglicemiante oral.","manter NPH 1/3 da dose.","manter insulinoterapia dose pr√©-natal."],correct:0,explanation:"Diabetes mellitus gestacional: ap√≥s parto, resist√™ncia insul√≠nica da gesta√ß√£o regride rapidamente. Suspender insulina no p√≥s-parto imediato, monitorar glicemias. Reclassificar diabetes 6-12 semanas p√≥s-parto (TOTG)."},
            {id:19,area:"Cl√≠nica M√©dica",question:"Mulher de 86 anos, quedas frequentes. HAS, DM2, dislipidemia, depress√£o, d√©ficit cognitivo leve, constipa√ß√£o. Usa: losartana, HCTZ, atenolol, metformina, gliclazida, rosuvastatina, escitalopram, donepezila, lactulose. Quedas diversos hor√°rios, mais madrugada (levantar ao banheiro). Bradipsiquismo, sarcopenia. PA deitada 138x92, sentada 110x70. Plano terap√™utico:",options:["Avaliar oftalmol√≥gica para catarata.","Encaminhar neurologista investigar disautonomia.","Rever polifarm√°cia para reduzir f√°rmacos hipotensores.","Adicionar fludrocortisona para elevar PA."],correct:2,explanation:"Hipotens√£o ortost√°tica (queda PA >20/10 mmHg) + polifarm√°cia anti-hipertensiva (losartana + HCTZ + atenolol) em idosa fr√°gil. Deprescri√ß√£o: retirar/reduzir hipotensores desnecess√°rios, priorizando HCTZ e betabloqueador."},
            {id:20,area:"Cl√≠nica M√©dica",question:"Mulher de 58 anos, com diagn√≥stico de hipertens√£o arterial sist√™mica (HAS) e em tratamento irregular, √© encaminhada ao ambulat√≥rio de cl√≠nica m√©dica de aten√ß√£o secund√°ria. Queixa-se de fadiga e dispneia aos esfor√ßos, com piora progressiva. Ao exame f√≠sico, √© observado ritmo card√≠aco regular em 4 tempos (B3 + B4), sem sopros no prec√≥rdio, mas com cr√©pitos em bases pulmonares; press√£o arterial: 148 x 90 mmHg. Ecocardiograma transtor√°cico evidencia hipertrofia ventricular esquerda conc√™ntrica, associada com fra√ß√£o de eje√ß√£o de 38%. Para melhorar o controle da HAS e o progn√≥stico da paciente, o f√°rmaco introduzido foi",options:["espironolactona.","clortalidona.","hidralazina.","clonidina."],correct:0,explanation:"A paciente apresenta IC com FE reduzida (38%). A espironolactona, antagonista da aldosterona, reduz mortalidade em IC-FER quando associada ao IECA (estudo RALES). Indicada em sintomas persistentes com FE < 40%."},
            {id:21,area:"Ginecologia e Obstetr√≠cia",question:"Mulher de 28 anos, corrimento vaginal abundante, amarelo-esverdeado, odor f√©tido, prurido. Colo 'morango'. pH vaginal 6,0. Tratamento:",options:["Metronidazol oral + tratar parceiro.","Fluconazol dose √∫nica.","Clindamicina vaginal.","Azitromicina dose √∫nica."],correct:0,explanation:"Tricomon√≠ase: corrimento amarelo-esverdeado espumoso, odor f√©tido, pH >4,5, colo em 'morango' (colpitis macularis). Causada por Trichomonas vaginalis. Tratamento: metronidazol 2g dose √∫nica ou 500mg 7 dias VO. Tratar parceiro obrigatoriamente."},
            {id:22,area:"Cl√≠nica M√©dica",question:"Mulher de 82 anos, sem hist√≥ria HAS pr√©via. PA farm√°cia h√° 1 sem: 146x86. UBS h√° 2 sem: 144x88. Hoje: 148x88. Assintom√°tica. Abordagem adequada:",options:["Referenciar cardiologista.","Holter 24h e ECO.","Losartana 50mg √† noite, monitorar PA.","Conduta expectante, monitorar PA."],correct:3,explanation:"Idosos >80 anos: alvo PA sist√≥lica 130-139 mmHg se tolerado. PA lim√≠trofe (144-148), assintom√°tica, primeira avalia√ß√£o. Conduta expectante com monitoramento adequado antes de iniciar medica√ß√£o."},
            {id:23,area:"Preventiva",question:"Teste triagem hansen√≠ase: sensibilidade 92%, especificidade 65%, popula√ß√£o baixa preval√™ncia. √â correto:",options:["quase todos testes positivos indicar√£o casos verdadeiros, pela alta sensibilidade.","n√∫mero de falsos-positivos elevado, pela baixa especificidade e baixa preval√™ncia.","n√∫mero de falsos-negativos elevado, reduzindo capacidade detectar casos.","alta sensibilidade torna ideal para confirma√ß√£o diagn√≥stica."],correct:1,explanation:"Baixa preval√™ncia + baixa especificidade = muitos falsos-positivos. VPP diminui quando preval√™ncia √© baixa, mesmo com alta sensibilidade. Alta sensibilidade √© boa para triagem (poucos falsos-negativos)."},
            {id:24,area:"Ginecologia e Obstetr√≠cia",question:"Nul√≠para de 30 anos, LES, trombose venosa recente. Ciclos 8-10 dias, sangramento intenso, c√≥licas fortes. Melhor contracep√ß√£o:",options:["DIU cobre.","DIU levonorgestrel.","Anticoncepcional injet√°vel mensal.","P√≠lula combinada cont√≠nua."],correct:1,explanation:"LES + trombose = contraindica√ß√£o absoluta a estrog√™nio (categoria 4). DIU levonorgestrel: progestag√™nio, seguro, reduz sangramento menstrual (vantagem nesta paciente). DIU cobre piora sangramento."},
            {id:25,area:"Cl√≠nica M√©dica",question:"Mulher de 70 anos, tosse produtiva h√° 3 sem, dispneia, febre baixa, emagrecimento 5kg/2m. Tabagista 40 anos/ma√ßo. RX: consolida√ß√£o lobo superior direito com cavita√ß√£o. Conduta:",options:["Amoxicilina-clavulanato 7 dias.","Solicitar escarro BAAR, iniciar esquema RIPE.","TC t√≥rax para investigar neoplasia.","Aguardar cultura escarro."],correct:1,explanation:"Tuberculose pulmonar: tosse >2-3 sem, febre baixa, emagrecimento, cavita√ß√£o lobo superior. Tabagismo √© fator de risco. Conduta: colher escarro para BAAR e cultura, iniciar tratamento emp√≠rico se suspeita alta. Esquema RIPE."},
            {id:26,area:"Cirurgia",question:"Mulher de 72 anos: emagrecimento e dor abdominal‚Üídorsal h√° 3m. H√° 1m: col√∫ria, prurido, icter√≠cia. EF: ict√©rica +++, emagrecida, f√≠gado palp√°vel, massa c√≠stica hipoc√¥ndrio direito. Exame adequado:",options:["USG avaliar colecistite cr√¥nica calculosa.","TC avaliar vias biliares e p√¢ncreas.","Colangiopancreatografia RM avaliar coledocolit√≠ase.","Bi√≥psia percut√¢nea massa avaliar neoplasia."],correct:1,explanation:"Tr√≠ade de Courvoisier: icter√≠cia obstrutiva + ves√≠cula palp√°vel + emagrecimento = neoplasia periampular (cabe√ßa p√¢ncreas/ampola/col√©doco distal). TC √© padr√£o-ouro para estadiamento c√¢ncer p√¢ncreas."},
            {id:27,area:"Cl√≠nica M√©dica",question:"Homem de 68 anos, HAS/DM/FA tratamento irregular. Rebaixamento consci√™ncia + d√©ficit neurol√≥gico esquerdo braquiofacial h√° 90min. Glasgow 9, hemiparesia esquerda, PA 170x100, FC 96 irregular. Glicemia 285. TC: hipodensidade 40% territ√≥rio ACM direita, laudo 3h ap√≥s √∫ltimo momento visto sem d√©ficit. Contraindica√ß√£o tromb√≥lise:",options:["isquemia > 1/3 territ√≥rio ACM.","tempo superior ao limite m√°ximo.","glicemia > 200 mg/dL > 2h p√≥s-prandial.","n√≠veis press√≥ricos superiores ao permitido."],correct:0,explanation:"Contraindica√ß√µes relativas tromb√≥lise: isquemia precoce extensa (>1/3 territ√≥rio ACM) aumenta risco transforma√ß√£o hemorr√°gica. Janela terap√™utica rtPA: at√© 4,5h do in√≠cio. Glicemia >400 √© contraindica√ß√£o relativa."},
            {id:28,area:"Preventiva",question:"Mulher de 21 anos, amenorreia 4m. Iniciou dieta h√° 10m, emagreceu 30kg. H√° 2d: desmaio exerc√≠cio, ECG alterado. Mora sozinha. IMC 14,7, PA 80x60, FC 55, FR 15. Conduta:",options:["Internar enfermaria cl√≠nica m√©dica.","Internar enfermaria sa√∫de mental.","Continuar investiga√ß√£o amenorreia na UBS.","Acompanhar ambulat√≥rio CAPS."],correct:0,explanation:"Anorexia nervosa grave com instabilidade cl√≠nica: IMC <15 (grave), hipotens√£o, bradicardia, s√≠ncope, altera√ß√µes ECG. Crit√©rios para interna√ß√£o hospitalar cl√≠nica: instabilidade hemodin√¢mica, arritmias, desnutri√ß√£o grave."},
            {id:29,area:"Pediatria",question:"Viol√™ncia contra adolescentes. Situa√ß√£o para notificar Conselho Tutelar:",options:["Manuel, 15a, abandonado, fam√≠lia acolhedora, febre, pet√©quias‚Üíp√∫rpuras, rigidez nuca, vacinas desconhecidas.","Michele, 13a, mora com tios temporariamente, equimoses m√∫ltiplos est√°gios h√° 1m, evita falar.","Felipe, 11a, abrigo desde 9a, recolhido 3d, febre, dor corpo/retro-orbit√°ria, sangramento gengival, pet√©quias.","Edilene, 16a, medida socioeducativa, equimoses, suores noturnos, febre, perda peso, linfonodos aumentados."],correct:1,explanation:"Notifica√ß√£o obrigat√≥ria: suspeita de viol√™ncia. Michele apresenta equimoses em m√∫ltiplos est√°gios (sugestivo de les√µes repetidas em tempos diferentes), evita falar (pode indicar abuso/medo). Manuel: meningococcemia. Felipe: prov√°vel dengue. Edilene: investigar linfoma."},
            {id:30,area:"Cirurgia",question:"Homem de 30 anos, trauma abdominal fechado (queda 3m). PA 80x50, FC 130, p√°lido, sudoreico. Abdome tenso, doloroso difusamente, sem RHA. FAST positivo. Conduta:",options:["TC abdome com contraste.","Reposi√ß√£o vol√™mica e reavalia√ß√£o.","Laparotomia exploradora imediata.","Observa√ß√£o em leito de emerg√™ncia."],correct:2,explanation:"Trauma abdominal fechado com instabilidade hemodin√¢mica (choque classe III) + FAST positivo (l√≠quido livre = prov√°vel hemoperit√¥nio). Indica√ß√£o de laparotomia exploradora imediata. N√£o retardar para TC."},
            {id:31,area:"Pediatria",question:"Adolescente de 12 anos para atualizar vacinas. At√© 8 anos todas em dia, 1 dose febre amarela aos 9m. Calend√°rio 2024-2025. Deve receber:",options:["HPV, refor√ßo hep B, dT.","Refor√ßo hep B, dT, SCR.","HPV, meningoc√≥cica ACWY, febre amarela.","SCR, meningoc√≥cica ACWY, febre amarela."],correct:2,explanation:"Calend√°rio adolescente 2024-2025: HPV (9-14 anos, 2 doses), meningoc√≥cica ACWY (11-12 anos, refor√ßo), febre amarela (refor√ßo 10 anos ap√≥s 1¬™ dose, ou seja, aos 9a9m‚âà10a)."},
            {id:32,area:"Pediatria",question:"Menino de 10 anos, urbano, dor cotovelo direito h√° 1d. H√° 1 sem: febre 38,5¬∞C 1-2x/dia, joelho direito doloroso/inchado. Ap√≥s 4d melhorou joelho, tornozelo direito ficou inchado/avermelhado/doloroso, melhorou 2d. H√° 3 sem: dor garganta. Nega contato animais. Dificuldade movimentar cotovelo (dor/edema), FC 110, 2B r√≠tmicas, sopro sist√≥lico 3+/6+. Agente etiol√≥gico e tratamento:",options:["Borrelia burgdorferi; doxiciclina.","Staphylococcus aureus; oxacilina.","Treponema pallidum; penicilina G benzatina.","Streptococcus pyogenes; penicilina G benzatina."],correct:3,explanation:"Febre reum√°tica: faringite estreptoc√≥cica h√° 2-3 semanas + artrite migrat√≥ria (joelho‚Üítornozelo‚Üícotovelo) + cardite (sopro novo). Crit√©rios Jones: 2 maiores ou 1 maior + 2 menores. Tratamento: penicilina benzatina."},
            {id:33,area:"Cl√≠nica M√©dica",question:"Homem de 48 anos reinicia TB. Tratamento h√° 6m, interrompeu h√° 2m (drogas). TRM-TB, baciloscopia e RX solicitados. Conduta adequada:",options:["Se TRM-TB+ sem resist√™ncia rifampicina, e BAAR-, reiniciar esquema b√°sico.","Se TRM-TB- e BAAR+, reiniciar b√°sico se resist√™ncia rifampicina+.","Se TRM-TB- e BAAR+, cultura com TS, reiniciar b√°sico aguardando cultura.","Se TRM-TB+ com resist√™ncia rifampicina, e BAAR+, cultura com TS, reiniciar b√°sico aguardando."],correct:2,explanation:"Retratamento ap√≥s abandono: TRM-TB negativo n√£o exclui TB. BAAR+ confirma micobact√©ria. Solicitar cultura + TSA para avaliar resist√™ncia. Reiniciar esquema b√°sico enquanto aguarda (tratamento n√£o pode atrasar)."},
            {id:34,area:"Preventiva",question:"Homem de 60 anos, DM2, nega sintomas urin√°rios. EAS: glicos√∫ria, protein√∫ria, 100.000 UFC/mL E. coli. Conduta:",options:["Antibi√≥tico 7 dias.","N√£o tratar, bacteri√∫ria assintom√°tica.","Antibi√≥tico 14 dias + investigar complica√ß√µes.","Aguardar sintomas para tratar."],correct:2,explanation:"Bacteri√∫ria assintom√°tica em diab√©tico: tratar (diferente da popula√ß√£o geral). DM √© fator de risco para complica√ß√µes. Tratamento: 7-14 dias (preferir 14 dias em diab√©ticos). Investigar fatores predisponentes."},
            {id:35,area:"Preventiva",question:"Menino de 10 anos. Pais relatam: fica irritado, agressivo quando contrariado; feliz quando consegue o que quer; n√£o assume culpa; discute com adultos; n√£o aceita regras. Diagn√≥stico prov√°vel:",options:["Transtorno afetivo bipolar.","Transtorno de oposi√ß√£o desafiante.","Transtorno disruptivo da desregula√ß√£o do humor.","TDAH."],correct:1,explanation:"Transtorno de oposi√ß√£o desafiante: padr√£o de comportamento negativista, hostil e desafiador por ‚â•6 meses. Caracter√≠sticas: discute com autoridades, n√£o aceita regras, irrita deliberadamente, n√£o assume responsabilidade, irrit√°vel quando contrariado."},
            {id:36,area:"Cl√≠nica M√©dica",question:"Homem de 55 anos, DM, metformina 850mg 3x/dia, gliclazida 30mg 1x/dia h√° >6m. HbA1c 9,5%, creatinina 0,8. Conduta adequada:",options:["Suspender orais, NPH 10UI manh√£ + 20UI noite, monitorar pr√©-prandial, depois p√≥s-prandial, iniciar regular.","Aumentar gliclazida 60mg, metformina 1g 3x/dia, repetir 1m, insulinizar se alterado.","Manter metformina, adicionar insulina NPH, titular conforme glicemias, manter gliclazida se HbA1c < 8%.","Suspender gliclazida, manter metformina, adicionar agonista GLP-1, reavaliar 3m."],correct:2,explanation:"HbA1c 9,5% (meta <7-8%): falha terap√™utica. Metformina dose m√°xima. Conduta: adicionar insulina basal (NPH ou an√°loga longa) 10UI ao deitar, titular conforme glicemia jejum. Manter metformina (reduz dose insulina, benef√≠cios CV)."},
            {id:37,area:"Cl√≠nica M√©dica",question:"Homem de 36 anos, tabagista, ascensorista. Tosse seca >3 sem, febre vespertina, dispneia esfor√ßos, dor infraescapular esquerda. Emagrecido, descorado. MV diminu√≠do e macicez base esquerda. Exame e conduta:",options:["RNM; programa√ß√£o cir√∫rgica.","TC t√≥rax; lobectomia segmentar.","TC t√≥rax; drenagem t√≥rax.","USG; toracocentese."],correct:3,explanation:"Derrame pleural (MV diminu√≠do + macicez): tosse, dispneia, dor pleur√≠tica. Febre + emagrecimento sugerem empiema ou TB pleural. Conduta: toracocentese diagn√≥stica (USG localiza). An√°lise l√≠quido: bioqu√≠mica, citologia, cultura, ADA."},
            {id:38,area:"Cirurgia",question:"Homem de 45 anos encontrado inconsciente junto a escada. TCE com altera√ß√£o de consci√™ncia, amn√©sia, equimose orbital e cervical posterior. A conduta adequada √©:",options:["TC cr√¢nio, face e coluna cervical; RX membros; observa√ß√£o 12h.","RX cr√¢nio, coluna cervical e membros; internar para observa√ß√£o.","TC cr√¢nio, face e RX membros; liberar para observa√ß√£o domiciliar.","RX cr√¢nio e face; RX membros; internar 24h."],correct:0,explanation:"TCE moderado com perda de consci√™ncia e amn√©sia requer TC (n√£o RX). Les√£o cervical posterior indica necessidade de TC de coluna cervical. Observa√ß√£o hospitalar 12-24h √© mandat√≥ria para monitorar complica√ß√µes."},
            {id:39,area:"Preventiva",question:"Sobre interna√ß√£o involunt√°ria no Brasil, √© correto afirmar que:",options:["√© determinada pela Justi√ßa.","√© autorizada por m√©dico registrado no CRM.","no prazo de 15 dias deve ser comunicada ao MPF.","t√©rmino ocorre por solicita√ß√£o do MP Municipal."],correct:1,explanation:"Interna√ß√£o involunt√°ria: autorizada por m√©dico registrado no CRM (Lei 10.216/2001). Diferente da compuls√≥ria (determinada por juiz). Deve ser comunicada ao Minist√©rio P√∫blico ESTADUAL em at√© 72h."},
            {id:40,area:"Cirurgia",question:"Homem de 58 anos: dor epig√°strica‚Üícostas h√° 2h, progressiva, p√≥s-prandial, n√°useas, v√¥mitos, sudorese. Epis√≥dios semelhantes √∫ltimo ano melhoravam com analg√©sico. Tabagista, etilista 8 doses/dia 33 anos. EF: sudoreico, f√°cies dor, agitado. IMC 23, PA 150x90, FC 74, FR 18, Tax 37¬∞C. Abdome globoso, distendido, timp√¢nico, peristalse presente, dor epig√°strio/HE. Diagn√≥stico prov√°vel:",options:["Colangite aguda.","Colecistite aguda.","Doen√ßa ulcerosa p√©ptica.","Pancreatite cr√¥nica."],correct:3,explanation:"Pancreatite cr√¥nica alco√≥lica: etilismo pesado prolongado, dor epig√°strica em faixa/dorso, epis√≥dios recorrentes, emagrecimento. Diferente da aguda: dor menos intensa, hist√≥ria longa, exacerba√ß√µes."},
            {id:41,area:"Preventiva",question:"Paciente p√≥s-IAM h√° 3 meses, encaminhado √† cardiologia para manejo de antiagrega√ß√£o. N√≠vel de aten√ß√£o e tipo de preven√ß√£o:",options:["Prim√°rio; secund√°rio.","Secund√°rio; secund√°rio.","Terci√°rio; terci√°rio.","Quatern√°rio; terci√°rio."],correct:2,explanation:"Aten√ß√£o terci√°ria = especialistas/alta complexidade. Preven√ß√£o terci√°ria = prevenir complica√ß√µes/recorr√™ncias em doen√ßa estabelecida. Paciente j√° teve IAM, objetivo √© prevenir novo evento."},
            {id:42,area:"Preventiva",question:"Mulher de 52 anos, filho morreu atropelado h√° 3d. Choro, dificuldade dormir, n√£o come. 'Dor no cora√ß√£o insuport√°vel', sonha com pessoa gritando nome filho. Primeiro acolhimento, fica calma. Nega idea√ß√£o suicida, nunca tratou psiquiatra. Conduta adequada:",options:["ISRS para sintomas depressivos e ansiosos.","Encaminhar CAPS para seguimento intensivo com psiquiatra.","Encaminhar psicologia aten√ß√£o secund√°ria para terapia psicanal√≠tica breve.","Acompanhar longitudinalmente, observa√ß√£o, apoio equipe UBS."],correct:3,explanation:"Luto agudo/normal (filho falecido h√° 3 dias): rea√ß√£o esperada, n√£o patol√≥gica. Sintomas: tristeza intensa, choro, ins√¥nia, anorexia. Conduta: acolhimento, valida√ß√£o sentimentos, acompanhamento longitudinal. N√£o medicar luto normal."},
            {id:43,area:"Preventiva",question:"Esquizofr√™nico de 20 anos acordou 'torto'. Troca risperidona‚Üíhaloperidol h√° 5 dias. Contratura cervical e f√°cies de dor. Diagn√≥stico e conduta:",options:["Distonia; biperideno IM.","Acatisia; haloperidol IM.","Discinesia tardia; diazepam IM.","S√≠ndrome extrapiramidal; prometazina IM."],correct:0,explanation:"Distonia aguda: contra√ß√µes musculares involunt√°rias (torcicolo, opist√≥tono). Comum com antipsic√≥ticos t√≠picos de alta pot√™ncia (haloperidol), primeiros dias de uso. Tratamento: anticolin√©rgico (biperideno) IM/IV, resposta r√°pida."},
            {id:44,area:"Pediatria",question:"Crian√ßa de 7 anos, 4¬™ semana de quimioterapia (LLA), febre h√° 12h, tosse, dispneia. Ap√≥s 24h: febril, PA 90x60, FC 130, FR 36, boa perfus√£o. Lactato elevado, acidose metab√≥lica. Diagn√≥stico:",options:["sepse.","choque s√©ptico.","disfun√ß√£o de m√∫ltiplos √≥rg√£os.","SIRS."],correct:0,explanation:"Sepse pedi√°trica: infec√ß√£o + disfun√ß√£o org√¢nica (lactato elevado, acidose). N√£o √© choque pois mant√©m PA adequada e boa perfus√£o. Diurese preservada. Neutropenia febril complicada com sepse em oncol√≥gico."},
            {id:45,area:"Cl√≠nica M√©dica",question:"Homem de 50 anos: astenia, constipa√ß√£o com fezes em fita, perda 10kg/6m. Edema MMII at√© raiz crural, pouca melhora com eleva√ß√£o. Achados laboratoriais necess√°rios para definir s√≠ndrome renal:",options:["Protein√∫ria 24h = 3,6g e albumina = 1,8 g/dL.","Protein√∫ria 24h = 3,6g e TG = 200 mg/dL.","Hemat√∫ria e TG = 200 mg/dL.","Hemat√∫ria e albumina = 1,8 g/dL."],correct:0,explanation:"S√≠ndrome nefr√≥tica: protein√∫ria > 3,5g/24h + hipoalbuminemia < 3g/dL. Edema importante sugere hipoalbuminemia grave. Fezes em fita + emagrecimento sugerem neoplasia col√¥nica (poss√≠vel causa paraneopl√°sica)."},
            {id:46,area:"Pediatria",question:"RN de 15 dias, termo, s√≠ndrome de Down. Peso nascimento 2600g/46cm, atual 2900g/47cm. Para acompanhamento p√¥ndero-estatural, dados devem ser plotados em:",options:["curvas OMS desde nascimento at√© adolesc√™ncia.","curvas espec√≠ficas s√≠ndrome de Down desde nascimento.","curvas OMS, corrigindo para s√≠ndrome de Down.","curvas OMS at√© 2 anos, depois curvas espec√≠ficas Down."],correct:1,explanation:"Crian√ßas com s√≠ndrome de Down t√™m padr√£o de crescimento diferente. Recomenda-se uso de curvas espec√≠ficas para s√≠ndrome de Down desde o nascimento, pois apresentam menor velocidade de crescimento e ganho ponderal."},
            {id:47,area:"Ginecologia e Obstetr√≠cia",question:"Adolescente de 16 anos, amenorreia prim√°ria. Fen√≥tipo feminino, pelos esparsos. USG: aus√™ncia √∫tero. FSH normal, testosterona masculina, cari√≥tipo 46 XY. Diagn√≥stico:",options:["Disgenesia gonadal.","Malforma√ß√£o Mulleriana.","Obstru√ß√£o trato genital.","Insensibilidade androg√™nica."],correct:3,explanation:"S√≠ndrome de insensibilidade androg√™nica completa: cari√≥tipo 46 XY, fen√≥tipo feminino, testosterona alta (test√≠culos funcionantes), FSH normal, aus√™ncia √∫tero/vagina superior. Receptores de andr√≥genos n√£o funcionam."},
            {id:48,area:"Cl√≠nica M√©dica",question:"Lactente de 4 meses com v√¥mitos, poli√∫ria, epis√≥dios de fraqueza intensa e febre. Ao exame f√≠sico, desidrata√ß√£o grave e d√©ficit de crescimento. Osteopenia e raquitismo resistente √† vitamina D. O dist√∫rbio √°cido b√°sico relacionado √©",options:["alcalose respirat√≥ria hipoclor√™mica.","acidose metab√≥lica hiperclor√™mica.","alcalose respirat√≥ria hipocal√™mica.","acidose metab√≥lica hipercal√™mica."],correct:1,explanation:"Quadro de acidose tubular renal. A ATR cursa com acidose metab√≥lica hiperclor√™mica (√¢nion gap normal), perda de bicarbonato ou incapacidade de secretar H+. Raquitismo ocorre por perda de c√°lcio e fosfato."},
            {id:49,area:"Cl√≠nica M√©dica",question:"Mulher de 20 anos com poliartrite sim√©trica h√° 3 meses (m√£os, punhos, cotovelos, joelhos, tornozelos). Rigidez matinal > 2h. Mucosas hipocoradas. Diagn√≥stico, achado laboratorial e tratamento:",options:["Esclerose sist√™mica; CK elevada; prednisona.","Artrite reumatoide; FR positivo; metotrexato.","LES; FAN pontilhado fino denso; cloroquina.","DMTC; FAN pontilhado fino; azatioprina."],correct:1,explanation:"Artrite reumatoide cl√°ssica: poliartrite sim√©trica de pequenas articula√ß√µes (MCF, IFP, punhos), rigidez matinal >1h, in√≠cio gradual. Anemia de doen√ßa cr√¥nica √© comum. FR positivo em 70-80%. Tratamento 1¬™ linha: metotrexato."},
            {id:50,area:"Cl√≠nica M√©dica",question:"Homem de 45 anos, diab√©tico, ferida plantar h√° 2 sem, n√£o cicatriza. Eritema, edema, secre√ß√£o purulenta, exposi√ß√£o √≥ssea. Afebril. Conduta:",options:["Antibi√≥tico oral, curativos, controle glic√™mico.","Desbridamento, antibi√≥tico EV, investigar osteomielite.","Aguardar cultura para iniciar antibi√≥tico.","Amputa√ß√£o imediata."],correct:1,explanation:"P√© diab√©tico com sinais de infec√ß√£o grave (exposi√ß√£o √≥ssea sugere osteomielite). Conduta: desbridamento cir√∫rgico, antibioticoterapia emp√≠rica EV de amplo espectro, investigar osteomielite (RX, RM). Controle glic√™mico otimizado."}
        ];

        // Vari√°veis globais
        let currentMode = '';
        let currentQuestions = [];
        let currentIndex = 0;
        let selectedOption = null;
        let stats = { correct: 0, incorrect: 0 };
        let isDarkMode = false;
        let timerInterval = null;
        let timeRemaining = 0;
        let selectedArea = 'all';


            // Contagem de quest√µes por √°rea
            const questionsByArea = {
                'all': 50,
                'Cirurgia': 8,
                'Cl√≠nica M√©dica': 19,
                'Ginecologia e Obstetr√≠cia': 7,
                'Pediatria': 6,
                'Preventiva': 10
            };
        let answered = false;

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('darkMode');
            if (savedTheme === 'true') {
                isDarkMode = true;
                document.body.classList.add('dark-mode');
                document.getElementById('themeBtn').textContent = '‚òÄÔ∏è';
            }
            renderQuestionsGrid();
        });

        // Tema
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode');
            document.getElementById('themeBtn').textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('darkMode', isDarkMode);
        }

        // Navega√ß√£o
        function voltarInicio() {
            stopTimer();
            currentMode = '';
            currentQuestions = [];
            currentIndex = 0;
            selectedOption = null;
            stats = { correct: 0, incorrect: 0 };
            answered = false;

            hideAllScreens();
            document.getElementById('homeScreen').classList.remove('hidden');
            document.getElementById('homeBtn').classList.add('hidden');
        }

        function hideAllScreens() {
            ['homeScreen', 'randomConfig', 'specificConfig', 'questionArea', 'specificFinish', 'statsScreen'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
        }

        function showRandomConfig() {
            hideAllScreens();
            document.getElementById('randomConfig').classList.remove('hidden');
            selectedArea = 'all';
            document.querySelectorAll('#areaFilters .filter-btn').forEach((btn, i) => {
                btn.classList.toggle('active', i === 0);
            });
        }

        function showSpecificConfig() {
            hideAllScreens();
            document.getElementById('specificConfig').classList.remove('hidden');
            selectedArea = 'all';
            document.getElementById('searchBox').value = '';
            renderQuestionsGrid();
        }

        // Slider
        function updateSliderValue(val) {
            document.getElementById('sliderValue').textContent = val;
        }

        // Filtros
        function selectFilter(btn, area) {
                selectedArea = area;
                document.querySelectorAll('#areaFilters .filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // Atualizar m√°ximo do slider conforme √°rea selecionada
                const slider = document.getElementById('numQuestions');
                const sliderValue = document.getElementById('sliderValue');
                const maxQuestions = questionsByArea[area] || 50;

                slider.max = maxQuestions;

                // Definir um valor inicial adequado para a √°rea
                // Se m√°ximo <= 10: use o m√°ximo
                // Se m√°ximo > 10: use metade (m√≠nimo 5)
                let newValue;
                if (maxQuestions <= 10) {
                    newValue = maxQuestions;
                } else {
                    newValue = Math.max(5, Math.floor(maxQuestions / 2));
                }

                slider.value = newValue;
                sliderValue.textContent = newValue;

                // Atualizar texto "Dispon√≠vel X quest√µes"
                const availableText = document.querySelector('.slider-container div[style*="margin-top"]');
                if (availableText) {
                    availableText.textContent = 'Dispon√≠vel: ' + maxQuestions + ' quest√µes';
                }
            }

        function filterByArea(btn, area) {
            selectedArea = area;
            document.querySelectorAll('#specificConfig .filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            renderQuestionsGrid();
        }

        function filterQuestions() {
            renderQuestionsGrid();
        }

        // Renderizar grid
        function renderQuestionsGrid() {
            const grid = document.getElementById('questionsGrid');
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            grid.innerHTML = '';

            let filtered = questions;

            if (selectedArea !== 'all') {
                filtered = questions.filter(q => q.area === selectedArea);
            }

            if (searchTerm) {
                filtered = filtered.filter(q => 
                    q.question.toLowerCase().includes(searchTerm) ||
                    q.area.toLowerCase().includes(searchTerm)
                );
            }

            filtered.forEach(q => {
                const btn = document.createElement('button');
                btn.className = 'question-btn';
                btn.textContent = q.id;
                btn.onclick = () => startSpecific(q.id);
                grid.appendChild(btn);
            });

            if (filtered.length === 0) {
                grid.innerHTML = '<p style="text-align: center; padding: 20px; opacity: 0.6;">Nenhuma quest√£o encontrada</p>';
            }
        }

        // Iniciar modos
        function startRandom() {
            const num = parseInt(document.getElementById('numQuestions').value);
            const enableTimer = document.getElementById('enableTimer').checked;

            let filtered = questions;
            if (selectedArea !== 'all') {
                filtered = questions.filter(q => q.area === selectedArea);
            }

            if (num > filtered.length) {
                alert(`Apenas ${filtered.length} quest√µes dispon√≠veis nesta √°rea!`);
                return;
            }

            currentMode = 'random';
            currentQuestions = [...filtered].sort(() => Math.random() - 0.5).slice(0, num);
            currentIndex = 0;
            stats = { correct: 0, incorrect: 0 };

            if (enableTimer) {
                timeRemaining = num * 120;
                startTimer();
            }

            hideAllScreens();
            document.getElementById('questionArea').classList.remove('hidden');
            document.getElementById('homeBtn').classList.remove('hidden');

            loadQuestion();
        }

        function startSpecific(questionId) {
            currentMode = 'specific';
            currentQuestions = [questions.find(q => q.id === questionId)];
            currentIndex = 0;
            stats = { correct: 0, incorrect: 0 };

            hideAllScreens();
            document.getElementById('questionArea').classList.remove('hidden');
            document.getElementById('homeBtn').classList.remove('hidden');

            loadQuestion();
        }

        // Timer
        function startTimer() {
            document.getElementById('timerDisplay').classList.remove('hidden');
            updateTimerDisplay();

            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();

                if (timeRemaining <= 0) {
                    stopTimer();
                    alert('‚è∞ Tempo esgotado!');
                    finishQuiz();
                }
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            document.getElementById('timerDisplay').classList.add('hidden');
        }

        function updateTimerDisplay() {
            const mins = Math.floor(timeRemaining / 60);
            const secs = timeRemaining % 60;
            document.getElementById('timerValue').textContent = 
                `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        // Carregar quest√£o
        function loadQuestion() {
            const q = currentQuestions[currentIndex];
            selectedOption = null;
            answered = false;

            document.getElementById('questionNum').textContent = `Quest√£o ${q.id}`;
            document.getElementById('questionCategory').textContent = q.area;
            document.getElementById('questionText').textContent = q.question;

            const progress = ((currentIndex + 1) / currentQuestions.length) * 100;
            document.getElementById('progress').style.width = progress + '%';

            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';

            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt;
                btn.onclick = () => selectAndConfirm(idx);
                container.appendChild(btn);
            });

            document.getElementById('explanationContainer').innerHTML = '';
            document.getElementById('explanationContainer').classList.add('hidden');
            document.getElementById('nextBtnContainer').classList.add('hidden');
        }

        // Sistema de clique direto
        function selectAndConfirm(idx) {
            if (answered) return;

            answered = true;
            const q = currentQuestions[currentIndex];
            const buttons = document.querySelectorAll('.option-btn');
            const isCorrect = idx === q.correct;

            buttons.forEach((btn, i) => {
                btn.classList.add('disabled');
                btn.onclick = null;

                if (i === q.correct) {
                    btn.classList.add('correct');
                } else if (i === idx && !isCorrect) {
                    btn.classList.add('incorrect');
                }
            });

            if (isCorrect) stats.correct++;
            else stats.incorrect++;

            const expContainer = document.getElementById('explanationContainer');
            expContainer.innerHTML = `
                <div class="explanation-container">
                    <div class="explanation-card">
                        <div class="explanation-header">
                            <span class="explanation-icon">üí°</span>
                            <span>Explica√ß√£o</span>
                        </div>
                        <div class="explanation-content">
                            ${q.explanation}
                        </div>
                    </div>
                </div>
            `;
            expContainer.classList.remove('hidden');

            // Atualizar bot√£o baseado na posi√ß√£o
            updateNextButton();
            document.getElementById('nextBtnContainer').classList.remove('hidden');
        }

        // NOVO: Atualizar texto e estilo do bot√£o baseado se √© √∫ltima quest√£o
        function updateNextButton() {
            const isLastQuestion = (currentIndex + 1) === currentQuestions.length;
            const nextBtn = document.getElementById('nextBtn');
            const nextBtnText = document.getElementById('nextBtnText');

            if (isLastQuestion) {
                // √öltima quest√£o
                if (currentMode === 'specific') {
                    nextBtnText.textContent = '‚úÖ Concluir';
                } else {
                    nextBtnText.textContent = 'üìä Ver Resultado';
                }
                nextBtn.className = 'btn btn-finish'; // Cor diferente
            } else {
                // N√£o √© a √∫ltima
                nextBtnText.textContent = 'Pr√≥xima Quest√£o ‚Üí';
                nextBtn.className = 'btn btn-success';
            }
        }

        function nextQuestion() {
            currentIndex++;

            if (currentIndex < currentQuestions.length) {
                loadQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            stopTimer();
            document.getElementById('questionArea').classList.add('hidden');
            document.getElementById('homeBtn').classList.add('hidden');

            if (currentMode === 'specific') {
                document.getElementById('specificFinish').classList.remove('hidden');
            } else {
                hideAllScreens();
                document.getElementById('statsScreen').classList.remove('hidden');

                const total = currentQuestions.length;
                const pct = ((stats.correct / total) * 100).toFixed(1);

                document.getElementById('totalQuestions').textContent = total;
                document.getElementById('correctAnswers').textContent = stats.correct;
                document.getElementById('incorrectAnswers').textContent = stats.incorrect;
                document.getElementById('finalPercentage').textContent = pct + '%';
            }
        }
    </script>
</body>
</html>